# =================================
# FRKB API 环境变量配置示例
# =================================
# 将此文件复制为 .env 并填入实际配置值

# =================================
# 🚀 服务器基础配置
# =================================
# 服务器运行端口
PORT=3001
SERVER_PORT=3001

# 运行环境 (development/production)
NODE_ENV=development

# API路由前缀
API_PREFIX=/frkbapi/v1

# =================================
# 🔐 安全认证配置 (必需)
# =================================
# API访问密钥 (必须修改！)
API_SECRET_KEY=FRKB_API_SECRET_TOKEN_2024_CHANGE_THIS

# 管理员访问令牌 (可选)
ADMIN_SECRET_TOKEN=your_admin_secret_token

# =================================
# 🗄️ MongoDB 数据库配置 (必需)
# =================================
# MongoDB连接地址 (不包含数据库名)
MONGODB_URI=mongodb://localhost:27017/

# 数据库用户名
MONGODB_USERNAME=your_username

# 数据库密码  
MONGODB_PASSWORD=your_password

# 认证数据库名称
MONGODB_DATABASE=frkb_database

# =================================
# ⚡ 性能优化配置
# =================================
# 启用布隆过滤器 (true/false) - 建议启用
BLOOM_FILTER_ENABLED=true
# 布隆过滤器最小容量 (根据预期指纹数量设置)
BLOOM_FILTER_MIN_CAPACITY=50000
# 增长倍数预估 (5-15)
BLOOM_FILTER_GROWTH_MULTIPLIER=5
# 基础倍数 (1.2-1.5)
BLOOM_FILTER_BASE_MULTIPLIER=1.2
# 误报率 (0.01 = 1%)
BLOOM_FILTER_FALSE_POSITIVE_RATE=0.01

# 启用内存缓存 (true/false) - 建议启用  
CACHE_ENABLED=true
CACHE_TTL=3600
CACHE_MAX_SIZE=10000

# =================================
# 🚦 请求限制配置 (简化架构)
# =================================
# 全局基础限流：每个时间窗口最大请求数
RATE_LIMIT_MAX=100

# 时间窗口长度 (毫秒) - 1分钟
RATE_LIMIT_WINDOW_MS=60000

# 注意：严格限流(10次/5分钟)在代码中硬编码，用于敏感操作

# =================================
# 📦 批处理配置
# =================================
# 批处理大小
BATCH_SIZE=2000

# 最大并发批次数
MAX_CONCURRENT_BATCHES=4

# 每批超时时间 (毫秒)
TIMEOUT_PER_BATCH=30000

# 重试次数
RETRY_TIMES=3

# =================================
# 📋 日志配置 (已优化)
# =================================
# 日志级别 (debug/info/warn/error)
LOG_LEVEL=info

# 日志目录
LOG_DIR=./logs

# 单个日志文件最大大小
LOG_MAX_SIZE=5m

# 应用日志保留时间 
LOG_APP_RETENTION=3d

# 错误日志保留时间 
LOG_ERROR_RETENTION=7d

# 启用精简日志模式 
LOG_MINIMAL=false

# 跳过健康检查日志 
LOG_SKIP_HEALTH=true

# 跳过成功认证日志 
LOG_SKIP_AUTH_SUCCESS=true

# =================================
# 🌐 HTTP配置
# =================================
# 是否启用响应压缩
ENABLE_COMPRESSION=true

# 请求体大小限制
REQUEST_SIZE_LIMIT=10mb

# =================================
# 📊 生产环境优化建议
# =================================
# 生产环境推荐配置：
# NODE_ENV=production
# LOG_LEVEL=warn
# LOG_MINIMAL=true
# LOG_APP_RETENTION=1d
# LOG_ERROR_RETENTION=3d
# BLOOM_FILTER_ENABLED=true
# BLOOM_FILTER_MIN_CAPACITY=150000  # 针对大规模数据
# CACHE_ENABLED=true
# RATE_LIMIT_MAX=100
# RATE_LIMIT_WINDOW_MS=60000

# =================================
# 🛠️ 开发环境优化建议  
# =================================
# 开发环境推荐配置：
# NODE_ENV=development
# LOG_LEVEL=debug
# LOG_MINIMAL=false
# LOG_SKIP_HEALTH=true
# BLOOM_FILTER_ENABLED=true  # 建议开启以测试完整功能
# BLOOM_FILTER_MIN_CAPACITY=20000  # 开发环境可用较小值
# CACHE_ENABLED=true
# RATE_LIMIT_MAX=100
# RATE_LIMIT_WINDOW_MS=60000